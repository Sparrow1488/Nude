2023-05-01 19:52:49.321 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:52:49.860 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "Nude.Telegram";
2023-05-01 19:52:50.014 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    migration_id character varying(150) NOT NULL,
    product_version character varying(32) NOT NULL,
    CONSTRAINT pk___ef_migrations_history PRIMARY KEY (migration_id)
);
2023-05-01 19:52:50.058 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
2023-05-01 19:52:50.067 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id;
2023-05-01 19:52:50.091 +03:00 [INF] Applying migration '20230409180919_0.0.1'.
2023-05-01 19:52:50.305 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Messages" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "UserId" bigint NOT NULL,
    "ChatId" bigint NOT NULL,
    "TicketId" integer NOT NULL,
    "UserKey" text NOT NULL,
    "TicketType" text NOT NULL,
    "MessageId" bigint NOT NULL,
    CONSTRAINT "PK_Messages" PRIMARY KEY ("Id")
);
2023-05-01 19:52:50.321 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230409180919_0.0.1', '6.0.16');
2023-05-01 19:52:50.338 +03:00 [INF] Applying migration '20230410203712_0.0.2'.
2023-05-01 19:52:50.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Messages" RENAME COLUMN "UserKey" TO "ContentKey";
2023-05-01 19:52:50.348 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230410203712_0.0.2', '6.0.16');
2023-05-01 19:52:50.355 +03:00 [INF] Applying migration '20230411222707_0.0.3'.
2023-05-01 19:52:50.363 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Messages" DROP CONSTRAINT "PK_Messages";
2023-05-01 19:52:50.367 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Messages" DROP COLUMN "TicketType";
2023-05-01 19:52:50.371 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Messages" RENAME TO messages;
2023-05-01 19:52:50.374 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "Id" TO id;
2023-05-01 19:52:50.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "UserId" TO user_id;
2023-05-01 19:52:50.382 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "TicketId" TO ticket_id;
2023-05-01 19:52:50.386 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "MessageId" TO message_id;
2023-05-01 19:52:50.389 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "ContentKey" TO content_key;
2023-05-01 19:52:50.393 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN "ChatId" TO chat_id;
2023-05-01 19:52:50.406 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages ADD CONSTRAINT pk_messages PRIMARY KEY (id);
2023-05-01 19:52:50.409 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230411222707_0.0.3', '6.0.16');
2023-05-01 19:52:50.418 +03:00 [INF] Applying migration '20230414204353_0.0.4'.
2023-05-01 19:52:50.434 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages DROP COLUMN user_id;
2023-05-01 19:52:50.438 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages ADD owner_id integer NOT NULL DEFAULT 0;
2023-05-01 19:52:50.461 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id bigint NOT NULL,
    username text NOT NULL,
    access_token text NOT NULL,
    CONSTRAINT pk_users PRIMARY KEY (id)
);
2023-05-01 19:52:50.474 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_messages_owner_id ON messages (owner_id);
2023-05-01 19:52:50.478 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages ADD CONSTRAINT fk_messages_users_owner_id FOREIGN KEY (owner_id) REFERENCES users (id) ON DELETE CASCADE;
2023-05-01 19:52:50.483 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230414204353_0.0.4', '6.0.16');
2023-05-01 19:52:50.489 +03:00 [INF] Applying migration '20230418220512_0.0.5'.
2023-05-01 19:52:50.504 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages DROP COLUMN content_key;
2023-05-01 19:52:50.507 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages RENAME COLUMN ticket_id TO details_id;
2023-05-01 19:52:50.530 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE message_details (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    discriminator text NOT NULL,
    ticket_id integer NULL,
    content_key text NULL,
    media_group_id text NULL,
    current_media integer NULL,
    total_media integer NULL,
    CONSTRAINT pk_message_details PRIMARY KEY (id)
);
2023-05-01 19:52:50.542 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX ix_messages_details_id ON messages (details_id);
2023-05-01 19:52:50.545 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages ADD CONSTRAINT fk_messages_message_details_details_id FOREIGN KEY (details_id) REFERENCES message_details (id) ON DELETE CASCADE;
2023-05-01 19:52:50.549 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230418220512_0.0.5', '6.0.16');
2023-05-01 19:52:50.556 +03:00 [INF] Applying migration '20230419075713_0.0.6'.
2023-05-01 19:52:50.595 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE messages ALTER COLUMN message_id TYPE integer;
2023-05-01 19:52:50.600 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230419075713_0.0.6', '6.0.16');
2023-05-01 19:52:50.607 +03:00 [INF] Applying migration '20230419194632_0.0.7'.
2023-05-01 19:52:50.636 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE medias (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    content_key text NOT NULL,
    file_id text NOT NULL,
    media_type integer NOT NULL,
    CONSTRAINT pk_medias PRIMARY KEY (id)
);
2023-05-01 19:52:50.639 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" (migration_id, product_version)
VALUES ('20230419194632_0.0.7', '6.0.16');
2023-05-01 19:52:51.199 +03:00 [INF] Now listening on: http://localhost:5000
2023-05-01 19:52:51.202 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-05-01 19:52:51.204 +03:00 [INF] Hosting environment: Production
2023-05-01 19:52:51.205 +03:00 [INF] Content root path: C:\Users\ilyao\OneDrive\Desktop\Development\Projects\Nude\src\Nude.Bot.Tg\
2023-05-01 19:52:53.264 +03:00 [INF] Nude Dev started
2023-05-01 19:53:01.389 +03:00 [INF] Get message '/start' by user sprw1488
2023-05-01 19:53:01.412 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:01.878 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:02.768 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM users AS u
    WHERE u.user_id = @__userId_0)
2023-05-01 19:53:02.967 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?' (DbType = Int64), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (access_token, user_id, username)
VALUES (@p0, @p1, @p2)
RETURNING id;
2023-05-01 19:53:26.718 +03:00 [INF] Get message 'Профиль' by user sprw1488
2023-05-01 19:53:26.770 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:26.779 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:30.439 +03:00 [INF] Get message 'Обновить токен' by user sprw1488
2023-05-01 19:53:30.442 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:30.449 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:30.932 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE users SET access_token = @p0
WHERE id = @p1;
2023-05-01 19:53:31.831 +03:00 [INF] Get message 'Домой' by user sprw1488
2023-05-01 19:53:31.833 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:31.838 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:33.061 +03:00 [INF] Get message 'Профиль' by user sprw1488
2023-05-01 19:53:33.063 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:33.068 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:34.699 +03:00 [INF] Get message 'Домой' by user sprw1488
2023-05-01 19:53:34.710 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:34.719 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:38.390 +03:00 [INF] Get message 'no_message' by user sprw1488
2023-05-01 19:53:38.392 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:38.397 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:38.448 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mediaGroupId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.chat_id, m.details_id, m.message_id, m.owner_id, m0.id, m0.discriminator, m0.content_key, m0.ticket_id, m0.current_media, m0.media_group_id, m0.total_media
FROM messages AS m
INNER JOIN message_details AS m0 ON m.details_id = m0.id
WHERE (m0.discriminator = 'MediaGroupDetails') AND (m0.media_group_id = @__mediaGroupId_0)
LIMIT 1
2023-05-01 19:53:38.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mediaGroupId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.chat_id, m.details_id, m.message_id, m.owner_id, m0.id, m0.discriminator, m0.content_key, m0.ticket_id, m0.current_media, m0.media_group_id, m0.total_media
FROM messages AS m
INNER JOIN message_details AS m0 ON m.details_id = m0.id
WHERE (m0.discriminator = 'MediaGroupDetails') AND (m0.media_group_id = @__mediaGroupId_0)
LIMIT 1
2023-05-01 19:53:38.853 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO message_details (current_media, discriminator, media_group_id, total_media)
VALUES (@p0, @p1, @p2, @p3)
RETURNING id;
2023-05-01 19:53:38.861 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int64), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO messages (chat_id, details_id, message_id, owner_id)
VALUES (@p4, @p5, @p6, @p7)
RETURNING id;
2023-05-01 19:53:41.414 +03:00 [INF] Get message 'no_message' by user sprw1488
2023-05-01 19:53:41.416 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:53:41.421 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:53:41.430 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mediaGroupId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.chat_id, m.details_id, m.message_id, m.owner_id, m0.id, m0.discriminator, m0.content_key, m0.ticket_id, m0.current_media, m0.media_group_id, m0.total_media
FROM messages AS m
INNER JOIN message_details AS m0 ON m.details_id = m0.id
WHERE (m0.discriminator = 'MediaGroupDetails') AND (m0.media_group_id = @__mediaGroupId_0)
LIMIT 1
2023-05-01 19:53:41.439 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mediaGroupId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.chat_id, m.details_id, m.message_id, m.owner_id, m0.id, m0.discriminator, m0.content_key, m0.ticket_id, m0.current_media, m0.media_group_id, m0.total_media
FROM messages AS m
INNER JOIN message_details AS m0 ON m.details_id = m0.id
WHERE (m0.discriminator = 'MediaGroupDetails') AND (m0.media_group_id = @__mediaGroupId_0)
LIMIT 1
2023-05-01 19:53:41.454 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.chat_id, m.details_id, m.message_id, m.owner_id, m0.id, m0.discriminator, m0.content_key, m0.ticket_id, m0.current_media, m0.media_group_id, m0.total_media
FROM messages AS m
INNER JOIN message_details AS m0 ON m.details_id = m0.id
WHERE m.id = @__id_0
LIMIT 1
2023-05-01 19:53:41.462 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE message_details SET current_media = @p0
WHERE id = @p1;
2023-05-01 19:54:02.245 +03:00 [INF] Get message 'Фотокарточки' by user sprw1488
2023-05-01 19:54:02.247 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:54:02.253 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:54:03.882 +03:00 [INF] Get message 'Рандомные Фотокарточки' by user sprw1488
2023-05-01 19:54:03.886 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:54:03.894 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:54:04.115 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.content_key, m.file_id, m.media_type
FROM medias AS m
WHERE m.content_key IN ('ImageEntry-7F15C4CA65DF8E2962E4D853788C7115E3469DE2438C42BE3DFCF648DCE89907', 'ImageEntry-FEDA989BCFA0B682B966C439FC8880D492F2825242020DC3D9A59B4EE9F7B425')
2023-05-01 19:54:05.834 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Int32), @p3='?', @p4='?', @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO medias (content_key, file_id, media_type)
VALUES (@p0, @p1, @p2)
RETURNING id;
INSERT INTO medias (content_key, file_id, media_type)
VALUES (@p3, @p4, @p5)
RETURNING id;
2023-05-01 19:54:07.388 +03:00 [INF] Get message 'Рандомные Фотокарточки' by user sprw1488
2023-05-01 19:54:07.390 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:54:07.396 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:54:07.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.content_key, m.file_id, m.media_type
FROM medias AS m
WHERE m.content_key IN ('ImageEntry-7F15C4CA65DF8E2962E4D853788C7115E3469DE2438C42BE3DFCF648DCE89907', 'ImageEntry-FEDA989BCFA0B682B966C439FC8880D492F2825242020DC3D9A59B4EE9F7B425')
2023-05-01 19:54:31.940 +03:00 [INF] Get message 'Рандомные Фотокарточки' by user sprw1488
2023-05-01 19:54:31.942 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:54:31.948 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:54:31.996 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.content_key, m.file_id, m.media_type
FROM medias AS m
WHERE m.content_key IN ('ImageEntry-7F15C4CA65DF8E2962E4D853788C7115E3469DE2438C42BE3DFCF648DCE89907', 'ImageEntry-FEDA989BCFA0B682B966C439FC8880D492F2825242020DC3D9A59B4EE9F7B425')
2023-05-01 19:54:33.169 +03:00 [INF] Get message 'Рандомные Фотокарточки' by user sprw1488
2023-05-01 19:54:33.170 +03:00 [INF] Entity Framework Core 6.0.16 initialized 'BotDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.8+e68dfe8b5cbe4a26d20acc36def6187aa1cfdda3' with options: MigrationsAssembly=Nude.Bot.Tg using snake-case naming  (culture=)
2023-05-01 19:54:33.176 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.user_id, t.username, m.id, m.chat_id, m.details_id, m.message_id, m.owner_id
FROM (
    SELECT u.id, u.access_token, u.user_id, u.username
    FROM users AS u
    WHERE u.user_id = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN messages AS m ON t.id = m.owner_id
ORDER BY t.id
2023-05-01 19:54:33.207 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.content_key, m.file_id, m.media_type
FROM medias AS m
WHERE m.content_key IN ('ImageEntry-7F15C4CA65DF8E2962E4D853788C7115E3469DE2438C42BE3DFCF648DCE89907', 'ImageEntry-FEDA989BCFA0B682B966C439FC8880D492F2825242020DC3D9A59B4EE9F7B425')
2023-05-01 19:54:40.197 +03:00 [INF] Application is shutting down...
